plugins {
  id 'org.ajoberstar.grgit' version '2.0.0'
  id 'org.ajoberstar.reckon' version '0.2.1'
  id 'com.diffplug.gradle.spotless' version '3.4.1'
}

reckon {
  normal = scopeFromProp()
  preRelease = stageFromProp('milestone', 'rc', 'final')
}

allprojects {
  apply plugin: 'com.diffplug.gradle.spotless'

  group = 'gradle-clojure'

  repositories {
    jcenter()
    maven { url = 'https://clojars.org/repo' }
  }

  plugins.withId('java') {
    // ensure consistent formatting
    spotless {
      java {
        eclipse().configFile rootProject.file('gradle/eclipse-java-google-style-nowrap.xml')
        licenseHeaderFile file('gradle/HEADER')
      }
      format('gradle') {
        target '**/*.gradle'
        trimTrailingWhitespace()
        indentWithSpaces(2)
        endWithNewline()
      }
    }
  }
}

wrapper {
  gradleVersion = '4.1'
}
