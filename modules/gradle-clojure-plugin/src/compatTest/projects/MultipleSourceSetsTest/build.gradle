plugins {
  id 'gradle-clojure.clojure'
}

repositories {
  mavenCentral()
  maven {
    name = 'Clojars'
    url = 'https://repo.clojars.org/'
  }
  mavenLocal()
}

dependencies {
  compile 'org.clojure:clojure:1.8.0'
  testCompile 'junit:junit:4.12'
}

sourceSets {
  ss1 {
    compileClasspath += configurations.compile
    runtimeClasspath += configurations.compile
  }
  ss2 {
    compileClasspath += configurations.compile
    runtimeClasspath += configurations.compile
    compileClasspath += ss1.output
    runtimeClasspath += ss1.output
  }
  test {
    compileClasspath += configurations.compile
    runtimeClasspath += configurations.compile
    compileClasspath += ss1.output
    runtimeClasspath += ss1.output
    compileClasspath += ss2.output
    runtimeClasspath += ss2.output
  }
}

compileSs2Clojure {
  options.aotCompile = true
}
